# 题目

- Java：[142]环形链表 II
- Related Topics 哈希表 链表 双指针 👍 1732 👎 0

```text
给定一个链表的头节点 head ，返回链表开始入环的第一个节点。 
  如果链表无环，则返回 null。 
  如果链表中有某个节点，
    可以通过连续跟踪 next 指针再次到达，
    则链表中存在环。 
为了表示给定链表中的环，
  评测系统内部使用整数 pos 来表示链表尾连接到链表中的位置（索引从 0 开始）。
如果 pos 是 -1，则在该链表中没有环。
注意：pos 不作为参数进行传递，仅仅是为了标识链表的实际情况。 

不允许修改 链表。 


示例 1： 

输入：head = [3,2,0,-4], pos = 1
输出：返回索引为 1 的链表节点
解释：链表中有一个环，其尾部连接到第二个节点。


示例 2： 

输入：head = [1,2], pos = 0
输出：返回索引为 0 的链表节点
解释：链表中有一个环，其尾部连接到第一个节点。


示例 3： 

输入：head = [1], pos = -1
输出：返回 null
解释：链表中没有环。


提示： 

链表中节点的数目范围在范围 [0, 10⁴] 内 
-10⁵ <= Node.val <= 10⁵ 
pos 的值为 -1 或者链表中的一个有效索引 


进阶：你是否可以使用 O(1) 空间解决此题？ 
```

# 读题

- 判断一个链表是否有环
- 每个链表存在一个 pos
  - 当有环时，pos 为 链表尾指针指向的索引位
    - `last.next = head[pos]`

# 法一：双指针

- 核心：快慢指针

## 思路

- 定义一对快慢指针，快指针为慢指针移动速度的2倍
- 若两指针相遇，则表示有环
- 定义一个与 slow 指针相同移动速度的 pos 指针，指向 head
  - 当两指针相遇，则此时的节点为真正的 pos 节点

## 实现

### 边界问题

- 节点数为0
- 节点数为1，但是 next 节点为空

### 细节问题

- 无环：`fast == null` or `fast.next == null`
- pos 节点查找时，使用 fast指针 代替 pos指针

### [代码实现](Demo01.java)

### 过程示例

```text
链表信息：
   1          pos
[3,2,0,-4]    链表

有无环判断： 指针 = index value
slow = 0 3, fast = 0 3
slow = 1 2, fast = 2 0
slow = 2 0, fast = 1 2
slow = 3 -4, fast = 3 -4

pos 节点查找： 指针 = index value
fast = 0 3, slow = 3 -4
fast = 1 2, slow = 1 2
```

### 复杂度

类型 | 复杂度 | 说明
:--- |:--- |:---
空间 | `O(1)` | `2 * O(1)` </br> - `O(1)` : 两个指针变量
时间 | `O(n)` | `2 * O(n)` + `2 * O(2n)` + `O(3n)` </br> - `O(n)` : 遍历链表 </br> - `O(2n)` : 无环条件判断 & pos查询 挪动指针 </br> - `O(3n)` : 有环判断 挪动指针

### 总结

情况 | 空间复杂度 | 时间复杂度 | 说明
:--- |:--- |:--- |:---
最好 | 无 | `O(1)` | 边界问题1 & 边界问题2
其次 | `O(1)` | `O(n)` | 无环链表(遍历 1次 链表)
最差 | `O(1)` | `O(n)` | 有环链表(遍历 2次 链表)
